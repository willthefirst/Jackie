@import "compass/layout/stretching";
@import "compass/reset";
@import "compass/css3/transform";
@import "compass/css3/transition";
@import "animation";
@import "compass/css3/background-size";
@import "compass/css3/images";
@import "mixins";
@import "base";

/* @group start-1 page */

	/* @group page-specific elements and animations */

		.start-1 {
			@include bluesky;

			&.current {
				&> .right-cloud {
					@include animation(right-cloud, 5s, 1s, $function:ease-in, $fill-mode:forwards);
				}
			
				&> .left-cloud {
					@include animation(left-cloud, 5s, 1s, $function:ease-in, $fill-mode:forwards);
				}

				&> .cloud-1 {
					@include animation(cloud-1, 50s, 1s, $function:linear, $fill-mode:forwards);
				}

				&> .cloud-2 {
					@include animation(cloud-2, 50s, 1s, $function:linear, $fill-mode:forwards);
				}
			}
		}

	/* @group end */

	/* @group keyframes */

		@include keyframes(right-cloud) {
			0% { @include translate3d(0, 0, 0); }
			100% { @include translate3d(200%, 0, 0); }
		}

		@include keyframes(left-cloud) {
			0% { @include translate3d(0, 0, 0); }
			100% { @include translate3d(-200%, 0, 0); }
		}

		@include keyframes(cloud-1) {
			0% { @include translate3d(0, 0, 0); }
			100% { @include translate3d(-400%, 0, 0); }
		}

		@include keyframes(cloud-2) {
			0% { @include translate3d(0, 0, 0); }
			100% { @include translate3d(300%, 0, 0); }
		}

	/* @end */

	/* @group elements */

		.title {
			@include dimensions(577.6px, 533px);
			@include responsive-bg(1start/title, top left);
			left: 50%;
			margin-left: -280.5px;		
		}

		.mountain {
			@include dimensions(100%, 225px);
			@include responsive-bg(1start/mountain, bottom left);
			bottom: -2px;
		}

		.sky {
			@include dimensions(100%, 550px);
			@include responsive-bg(1start/sky, bottom left);
			bottom: -100px;
		}

		.cloud-1 {
			@include dimensions(230px, 178px);
			@include responsive-bg(1start/cloud1);
			bottom: 225px;
			right: 75px;
		}

		.cloud-2 {
			@include dimensions(295.2px, 120px);
			@include responsive-bg(1start/cloud2, bottom left);
			top: 170px;
			left: 120px;
		}

		.titlej {
			@include dimensions(273.45px, 268.95px);
			@include responsive-bg(1start/frontj);
			top: 148px;
			left: 240px;
		}

		.right-cloud {
			@include dimensions(890px, 460px);
			@include responsive-bg(1start/right-cloud, top right);
			right: 0;
		}

		.left-cloud {
			@include dimensions(950px, 640px);
			@include responsive-bg(1start/left-cloud);
			top: 0px;
		}

	/* @end */

/* @end */

/* @group exposition-2 */

	/* @group page-specific elements and animations */

		.exposition-2 {
			@include bluesky(75%, 77%);

			.a {
				@include dimensions(400px, 400px);
				left: 40px;
				position: absolute;
				top: 100px;
			}

			.b {
				float: right;
				opacity: 0;
			}

			.c {
				@extend .a;
				opacity: 0;

				&:first-letter {
					line-height: 120px;
					margin-bottom: 20px;
					margin-right: 40px;
				};
			}

			/* @group timing variables */

				$first_text_go: 5s;
				$house_fall_go: $first_text_go + 2;
				$house_fall_speed: 2s;
				$second_text_go: $house_fall_go + 1.5;
				$sign_go: $house_fall_go + 2;

			/* @end */

			&.current {

				&> .a > .b {
					@include animation(in, 1s, 5s, $function:linear, $fill-mode:forwards);
				}

				&> .a {
					@include animation(out, 1s, $second_text_go, $function:linear, $fill-mode:forwards);
				}

				&> .c {
					@include animation(in, 1s, $second_text_go, $function:linear, $fill-mode:forwards);
				}

				&> .house-right {
					@include animation(fall_right, $house_fall_speed, $house_fall_go, $function:ease-in, $fill-mode:forwards);
				}

				&> .house-left {
					@include animation(fall_left, $house_fall_speed, $house_fall_go, $function:ease-in, $fill-mode:forwards);
				}

				&> .sign {
					@include animation(sign, .3s, $sign_go, $function:ease-in, $fill-mode:forwards);
				}

				&> .cloud {
					@include animation(cloud, 60s, 0.1s, $function:linear, $fill-mode:forwards);
				}
			}
		}

	/* @end */

	/* @group keyframes */

		@include keyframes(fall_right) {
			0% {
				opacity: 1;
				@include rotate3d(0, 0, 0, 0deg);
			}

			60% {
				@include rotate3d(100, -25, 0, 150deg);
				opacity: 1;
			}

			100% {
				@include rotate3d(100, -25, 0, 150deg);
				opacity: 0;
			}
		}

		@include keyframes(fall_left) {
			0% {
				opacity: 1;
				@include rotate3d(0, 0, 0, 0deg);
			}

			60% {
				@include rotate3d(100, 25, 0, 150deg);
				opacity: 1;
			}

			100% {
				@include rotate3d(100, 25, 0, 150deg);
				opacity: 0;
			}
		}

		@include keyframes(sign) {
			100% {
				@include rotate(360deg);
			}
		}

		@include keyframes(cloud) {
			100% {
				@include translate3d(-300%, 0, 0);
			}
		}

	/* @end */

	/* @group elements */

		.house-right {
			@include responsive-bg(2exposition/house_right, bottom left);
			@include transform-origin(50%, 95%);
			bottom: 111px;
			height: 419px;
			right: 85px;
			width: 160px;
		 }

		.house-left {
			@include responsive-bg(2exposition/house_left, bottom left);
			@include transform-origin(50%, 100%);
			bottom: 173px;
			height: 458.08px;
			right: 195px;
			width: 415.53px;
		 }

		.cloud {
			@include responsive-bg(2exposition/cloud, bottom left);
			height: 299.46px;
			right: -100px;
			top: 20px;
			width: 395.87px;
		 }

		.sign {
			@include background-size(100% 100%);
			@include responsive-bg(2exposition/sign, bottom left);
			@include transform(rotate(240deg));
			@include transform-origin(90%, 93%);
			bottom: 177px;
			height: 141px;
			left: 406px;
			width: 173px;
		}

		.grass-top {
			@include background-size(100% 100%);
			@include responsive-bg(2exposition/grass_top, bottom left);
			bottom: 0;
			height: 485px;
			width: 100%;
		}

		.grass-bottom {
			@include background-size(100% 100%);
			@include responsive-bg(2exposition/grass_bottom, bottom left);
			bottom: 0;
			height: 188px;
			width: 100%;
		}

	/* @end */

/* @end */

/* @group cowsale-3 */

	/* @group page-specific elements and animations */

		.cowsale-3 {
			@include scrollbg;

			&.current {
				&> .scroll-left-top {
					@include animation(moveleft, 1.5s, 1s, $function:ease-out, $fill-mode:forwards);
				}

				&> .scroll-left-bottom {
					@include animation(moveleft, 1.5s, 1s, $function:ease-out, $fill-mode:forwards);
				}

				&> .scroll-right {
					@include animation(moveright, 1.5s, 1s, $function:ease-out, $fill-mode:forwards);
				}

				&> .scroll {
					@include animation(expand, 1.5s, 1s, $function:ease-out, $fill-mode:forwards);
				}
			}
		}

	/* @end */

	/* @group keyframes */

		@include keyframes(moveright) {
			0% {
				@include translate3d( 0px, 0px, 0px );
			}

			100% {
				@include translate3d( 315px, 0px, 0px );
			}
		}

		@include keyframes(moveleft) {
			0% {
				@include translate3d( 0px, 0px, 0px );
			}

			100% {
				@include translate3d( -310px, 0px, 0px );
			}
		}

		@include keyframes(expand) {
			0% {
				@include background-size(640px, 100%);
				width: 20px;
				left: 50%;
				margin-left: -20px;
			}

			100% {
				@include background-size(640px, 100%);
				width: 640px;
				left: 50%;
				margin-left: -320px;
			}
		}

	/* @group end */

	/* @group elements */

		.beans {
			@include responsive-bg(general/beans, bottom left);
			@include dimensions(298px, 181px);
			bottom: -180px;
			left: 400px;
		}

		.scroll {
			@include responsive-bg(multitext/scroll, bottom left);
			@include dimensions(0px, 502px);
			top: 143px;
			overflow: hidden;
		}

		.scroll-left-bottom {
			@include responsive-bg(multitext/left_shadow, bottom left);
			@include dimensions(136px, 553px);
			left: 418px;
			top: 136px;
		}

		.scroll-left-top {
			@extend .scroll-left-bottom;
			@include responsive-bg(multitext/left_noshadow, bottom left);
			@include dimensions(97px, 553px);
		}

		.scroll-right {
			@include responsive-bg(multitext/right_shadow, bottom left);
			@include dimensions(139px, 553px);
			left: 459px;
			top: 127px;
		}

		.text {
			width: 520px;
			color: #000;
			text-shadow: none;
			font-size: 20px;
			margin: 80px 30px 20px 70px;
			line-height: 30px;
		}

	/* @end */

/* @end */

/* @group nextmorning-4 */

	.nextmorning-4 {
		@include scrollbg;
	}

	.scroll-out {
		@extend .scroll;
		width: 640px;
		left: 50%;
		margin-left: -320px;
	}

	.scroll-left-bottom-out {
		@extend .scroll-left-bottom;
		left: 108px;
	}

	.scroll-right-out {
		@extend .scroll-right;
		left: 774px;
		top: 127px;
	}

	.text4 {
		@extend .text;
		width: 300px;
		margin-left: 200px;
	}

	.intrigue {
		@extend .text;
		width: 500px;
		margin: 280px 50px 0 170px;
		font-size: 30px;
	}

/* @end */

/* @group beanstalk-5 */

	// Note: The css for this scene is formatted differently due to the scroll interaction that occurs.

	.beanstalk-5 {
		overflow-y: scroll;
		overflow-x: hidden;

		/* @group animations */

			&.current > .wrapper > {

				/* @group lower clouds */

					.cloudfront.top {
						@include animation(left, 10s, 0.1s, $iterations:infinite, $function:linear, $fill-mode:forwards);
					}

					.cloudfront.top2 {
						@include animation(right, 12s, 1s, $iterations:infinite, $function:linear, $fill-mode:forwards);
					}

					.cloudfront.top2 {
						@include animation(right, 14s, 1s, $iterations:infinite, $function:linear, $fill-mode:forwards);
					}

					.cloudfront.middle {
						@include animation(right, 12s, .1s, $iterations:infinite, $function:linear, $fill-mode:forwards);
					}

					.cloudfront.bottom {
						@include animation(left, 16s, .1s, $iterations:infinite, $function:linear, $fill-mode:forwards);
					}	

				/* @end */
			
				/* @group top */

					.castleclouds {
						@include animation(bouncesmall, 3s, .1s, $iterations:infinite, $function:ease-in-out, $fill-mode:forwards);
					}

					.birda {
						@include animation(fly1, 3s, .1s, $iterations: infinite, $function:linear, $fill-mode:forwards);
					}

					.birdb {
						@include animation(fly2, 3s, .1s, $iterations: infinite, $function:linear, $fill-mode:forwards);
					}

					.birdc {
						@include animation(fly3, 3s, .1s, $iterations: infinite, $function:linear, $fill-mode:forwards);
					}

					.birdd {
						@include animation(fly4, 4s, .1s, $iterations: infinite, $function:linear, $fill-mode:forwards);
					}

				/* @end */

				/* @group text */

					.on {
						@include animation(in, 1s, 0s, $function:linear, $fill-mode:forwards);
					}

					.off {
						@include animation(out, .5s, 0s, $function:linear, $fill-mode:forwards);
					}

				/* @end */

				/* @group z-indexes */

				.castle {
					z-index: 1;
				}

				.upperclouds, .birda, .birdb {
					z-index: 2;
				} 
			}	
			
		/* @end */
	
	}

	/* @group keyframes */

		@include keyframes(left) {
			0% { @include translate3d(0, 0, 0); }
			50% { @include translate3d(-200%, 0, 0); }
			100% { @include translate3d(200%, 0, 0); }
		}

		@include keyframes(right) {
			0% { @include translate3d(0, 0, 0); }
			50% { @include translate3d(200%, 0, 0); }
			100% { @include translate3d(-200%, 0, 0); }
		}


		@include keyframes(fly1) {
			0% {
				@include rotate3d(0, 1, 0, 90deg);
				right: 115px;
			}

			25% {
				@include rotate3d(0, 1, 0, 0deg);
				right: 162.5px;
			}

			49% {
				z-index: 2;
			}

			50% {
				@include rotate3d(0, 1, 0, -90deg);
				right: 210px;	
				z-index: 0;
			}

			75% {
				@include rotate3d(0, 1, 0, -180deg);
				right: 162.5px;
			}

			99% {
				z-index: 0;
			}

			100% {
				@include rotate3d(0, 1, 0, -270deg);
				right: 115px;	
				z-index: 2;
			}
		}

		@include keyframes(fly2) {
			0% {
				@include rotate3d(0, 1, 0, 0deg);
				right: 170px;
			}

			24% {
				z-index: 2;
			}

			25% {
				@include rotate3d(0, 1, 0, -90deg);
				right: 210px;
				z-index: 0;
			}

			50% {
				@include rotate3d(0, 1, 0, -180deg);
				right: 170px;	
			}

			74% {
				z-index: 0;
			}

			75% {
				@include rotate3d(0, 1, 0, -270deg);
				right: 130px;
				z-index: 2;	
			}

			100% {
				@include rotate3d(0, 1, 0, -360deg);
				right: 170px;	
			}
		}

		@include keyframes(fly3) {
			0% {
				@include rotate3d(0, 1, 0, -90deg);
				right: 230px;
				z-index: 0
			}

			25% {
				@include rotate3d(0, 1, 0, -180deg);
				right: 170px;
			}

			49% {
				z-index: 0;
			}

			50% {
				@include rotate3d(0, 1, 0, -270deg);
				right: 110px;
				z-index: 2;
			}

			75% {
				@include rotate3d(0, 1, 0, -360deg);
				right: 170px;
			}

			99% {
				z-index: 2;
			}

			100% {
				@include rotate3d(0, 1, 0, -450deg);
				right: 230px;
				z-index: 0;
			}
		}

		@include keyframes(fly4) {
			0% {
				@include rotate3d(0, 1, 0, -90deg);
				right: 230px;
				z-index: 0;
			}

			25% {
				@include rotate3d(0, 1, 0, -180deg);
				right: 170px;
				z-index: 0;
			}

			50% {
				@include rotate3d(0, 1, 0, -270deg);
				right: 110px;	
			}

			75% {
				@include rotate3d(0, 1, 0, -360deg);
				right: 170px;
				z-index: 2;	
			}

			99% {
				z-index: 2;
			}

			100% {
				@include rotate3d(0, 1, 0, -450deg);
				right: 230px;
				z-index: 0;
			}
		}

		@include keyframes(bouncebig) {
			0% { @include translate3d(0, 0, 0); }
			50% { @include translate3d(0, -20px, 0); }
			100% { @include translate3d(0, 0, 0); }
		}

		@include keyframes(bouncesmall) {
			0% { @include translate3d(0, 0, 0); }
			50% { @include translate3d(0, -10px, 0); }
			100% { @include translate3d(0, 0, 0); }
		}

	/* @end */

	// @import "normal/4beanstalk/birds/*.png";
	// @import "retina/4beanstalk/birds_2x/*.png";

	$birds: sprite-map("normal/4beanstalk/birds/*.png");


	/* @group page-specific elements */

		.wrapper {
			@include responsive-bg(4beanstalk/background, bottom left);
			@include dimensions(100%, 3229px);

			.castle {
				@include responsive-bg(4beanstalk/castle, bottom left);
				@include dimensions(335px, 558px);
				top: 58px;
				right: -40px;
				z-index: 0;
			}

			.upperclouds {
				@include responsive-bg(4beanstalk/cloudsupper, bottom left);
				@include dimensions(523px, 517px);
				top: 91px;
				right: -108px;
				z-index: 0;
			}

			// @include all-birds-sprites;
			// @include all-birds_2x-sprites;

			@media screen and (-webkit-min-device-pixel-ratio: 2) {
				.birda {
					background: $birds;
					font-size: 300px;
				}
			}

		
			.birda {
				// @include responsive-bg(4beanstalk/birds_front_1, bottom left);
				@include dimensions(13px, 11px);
				top: 120px;
				right: 100px;
				z-index: 0;
			}

			.birdb {
				@include responsive-bg(4beanstalk/birds_front_2, bottom left);
				@include dimensions(11px, 6px);
				top: 120px;
				right: 180px;
				z-index: 0;
			}

			.birdc {
				@include responsive-bg(4beanstalk/birds_front_3, bottom left);
				@include dimensions(10px, 5px);
				top: 120px;
				right: 200px;
				z-index: 0;
			}

			.birdd{
				@include responsive-bg(4beanstalk/birds_back_1, bottom left);
				@include dimensions(18px, 6px);
				top: 100px;
				right: 200px;
				z-index: 0;
			}

			/* @group text */

				.a {
					bottom: 410px;
					right: 50px;
					@include dimensions(500px, auto);
					opacity: 1;
				}

				.b {
					bottom: 1000px;
					right: 40px;
					color: rgb(34, 133, 41);
					opacity: 0;
				}

				.c {
					bottom: 1600px;
					left: 300px;
					color: rgb(34, 133, 41);
					opacity: 0;
				}

				.d {
					bottom: 2039px;
					right: 340px;
					@include rotateZ(22deg);
					color: rgb(34, 133, 41);
					opacity: 0;
				}

				.e {
					top: 70px;
					left: 40px;
					width: 700px;
					opacity: 0;
				}

			/* @end */
		}

	/* @end */

	/* @group elements */
	
		::-webkit-scrollbar {
		    display: none;
		}
 
		.castleclouds {
			@include responsive-bg(4beanstalk/castleclouds, bottom left);
			@include dimensions(184px, 108px);
			top: 58px;
			right: 90px;
		}

		.right {
			right: -200%;
		}

		.left {
			left: -200%;
		}

		.cloudfront {
			@include responsive-bg(4beanstalk/cloudfront, bottom left);
			@include dimensions(1689px, 987px);

			&.top {
				bottom: 1500px;
			}

			&.top2 {
				bottom: 1500px;
			}

			&.middle {
				bottom: 1000px;
			}

			&.bottom {
				bottom: 800px;
			}
		}

	/* @end */

/* @end */

/* @group theft-6 */

	.theft-6 {

		/* @group page-specific elements and animations */

		@extend .cowsale-3;

		p:first-letter {
			margin-bottom: 50px;
		}
	}

	.coins {
		@include responsive-bg(general/coins, bottom left);
		@include dimensions(250px, 239px);
		bottom: -240px;
		left: 400px;
	}

/* @end */

/* @group giant-7 */

	/* @group page-specific elements and animations */

		.giant-7 {
			@include responsive-bg(7giant/background, bottom left);

			.a {
				@include responsive-bg(7giant/fee, bottom left);
				@include dimensions(570px, 259px);
				@include rotate3d(0,0,0, -30deg);
				left: 215px;
				top: -240px;
			}

			.b {
				@include responsive-bg(7giant/fi, bottom left);
				@include dimensions(421px, 240px);
				@include transform-origin(100%, 100%);
				@include rotate3d(0,0,0, 30deg);
				left: 280px;
				top: -229px;
			}

			.c {
				@include responsive-bg(7giant/fo, bottom left);
				@include dimensions(100%, 100%);
				@include dimensions(421px, 240px);
				left: 280px;
				top: -233px;
			}

			.d {
				@include responsive-bg(7giant/fum, bottom left);
				@include dimensions(713px, 241px);
				left: 165px;
				top: -230px;
			}

			&.current {
				.a {
					@include animation(wordfall-left, 3s, 1s, $function:cubic-bezier(0.935, 0, 1.000, 1.000), $fill-mode:forwards);
				}

				.b {
					@include animation(wordfall-right, 3s, 3s, $function:ease-out, $fill-mode:forwards);
				}

				.c {
					@include animation(wordfall-left, 3s, 5s, $function:ease-out, $fill-mode:forwards);
				}

				.d {
					@include animation(wordfall-right, 3s, 7s, $function:ease-out, $fill-mode:forwards);
				}
			}
		}

	/* @end */

	/* @group keyframes */

		@include keyframes(wordfall-left) {
			0% {
				@include create-transform($rotate3d:(0,0,0, -30deg), $trans-x:(0px), $trans-y:(0px));
				@include animation-timing-function( cubic-bezier(0.935, 0, 1.000, 1.000));
				opacity: 1;
			}

			//hit corner

			30% {
				@include create-transform($rotate3d:(0,0,0, -30deg),$trans-x:(-260px), $trans-y:(490px));
			}

			//land 1

			33% {
				@include create-transform($rotate3d:(0,0,0, 0deg),$trans-x:(-20px), $trans-y:(490px));
				@include animation-timing-function(ease-out);
			}

			//apex 1

			45% {
				@include create-transform($rotate3d:(0,0,0, -15deg),$trans-x:(-138px), $trans-y:(490px));
				@include animation-timing-function(ease-in);
			}

			//land 2

			60% {
				@include create-transform($rotate3d:(0,0,0, 0deg),$trans-x:(-20px), $trans-y:(490px));
				@include animation-timing-function(ease-out);
			}

			//apex 2

			70% {
				@include create-transform($rotate3d:(0,0,0, -4deg),$trans-x:(-50px), $trans-y:(490px));
				@include animation-timing-function(ease-in);
			}

			//land 3

			80% {
				@include create-transform($rotate3d:(0,0,0, 0deg),$trans-x:(-20px), $trans-y:(490px));
			}

			90% {
				@include create-transform($rotate3d:(0,0,0, 0deg),$trans-x:(-20px), $trans-y:(490px));
				opacity: 1;
			}

			100% {
				opacity: 0;
				@include create-transform($rotate3d:(0,0,0, 0deg),$trans-x:(-20px), $trans-y:(800px));
			}
		}

		@include keyframes(wordfall-right) {
			0% {
				@include create-transform($rotate3d:(0,0,0, 30deg), $trans-x:(0px), $trans-y:(0px));
				@include animation-timing-function( cubic-bezier(0.935, 0, 1.000, 1.000));
				opacity: 1;
			}

			//hit corner

			30% {
				@include create-transform($rotate3d:(0,0,0, 30deg),$trans-x:(260px), $trans-y:(490px));
			}

			//land 1

			33% {
				@include create-transform($rotate3d:(0,0,0, 0deg),$trans-x:(20px), $trans-y:(490px));
				@include animation-timing-function(ease-out);
			}

			//apex 1

			45% {
				@include create-transform($rotate3d:(0,0,0, 15deg),$trans-x:(138px), $trans-y:(490px));
				@include animation-timing-function(ease-in);
			}

			//land 2

			60% {
				@include create-transform($rotate3d:(0,0,0, 0deg),$trans-x:(20px), $trans-y:(490px));
				@include animation-timing-function(ease-out);
			}

			//apex 2

			70% {
				@include create-transform($rotate3d:(0,0,0, 4deg),$trans-x:(50px), $trans-y:(490px));
				@include animation-timing-function(ease-in);
			}

			//land 3

			80% {
				@include create-transform($rotate3d:(0,0,0, 0deg),$trans-x:(20px), $trans-y:(490px));
			}

			90% {
				@include create-transform($rotate3d:(0,0,0, 0deg),$trans-x:(20px), $trans-y:(490px));
				opacity: 1;
			}

			100% {
				opacity: 0;
				@include create-transform($rotate3d:(0,0,0, 0deg),$trans-x:(20px), $trans-y:(800px));
			}
		}

	/* @end */

	/* @group elements */

		.clouds{
			@include responsive-bg(7giant/clouds, bottom left);
			@include dimensions(100%, 100%);
		}

		.landleft {
			@include transform-origin(0%, 100%);
		}

		.landright {
			@include transform-origin(100%, 100%);
		}
			
		// review
		// $ico-sprite-dimensions: true;
		// @import "normal/7giant/sheds/*.png";
		// @include all-sheds-sprites;

		// .sheds- {
		// 	s1 {}
		// }



	/* @end */

/* @end */

/* @group conversation1-8 */

	.conversation1-8 {
		@extend .cowsale-3;
	}

/* @end */

/* @group conversation2-8 */

	.conversation2-9 {
		@include scrollbg;
	}

/* @end */

/* @group end-9 */

	.end-9 {

		background-color: #000;

		&.current {
			&> .a {
				top: 100px;
				left: 30px;
				width: 500px;
			}
		}
	}

/* @end */
